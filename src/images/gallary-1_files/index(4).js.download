/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={445:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},500:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)a.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},539:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},635:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,a=0;n<e.length;n++,a+=8)t[a>>>5]|=e[n]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],a=0;a<e.length;a+=3)for(var r=e[a]<<16|e[a+1]<<8|e[a+2],o=0;o<4;o++)8*a+6*o<=8*e.length?n.push(t.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],a=0,r=0;a<e.length;r=++a%4)0!=r&&n.push((t.indexOf(e.charAt(a-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(a))>>>6-2*r);return n}},e.exports=n},892:(e,t,n)=>{var a,r,o,s,l;a=n(635),r=n(539).utf8,o=n(445),s=n(539).bin,(l=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):r.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=a.bytesToWords(e),c=8*e.length,i=1732584193,p=-271733879,u=-1732584194,m=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var _=l._ff,w=l._gg,f=l._hh,h=l._ii;for(d=0;d<n.length;d+=16){var g=i,y=p,b=u,v=m;i=_(i,p,u,m,n[d+0],7,-680876936),m=_(m,i,p,u,n[d+1],12,-389564586),u=_(u,m,i,p,n[d+2],17,606105819),p=_(p,u,m,i,n[d+3],22,-1044525330),i=_(i,p,u,m,n[d+4],7,-176418897),m=_(m,i,p,u,n[d+5],12,1200080426),u=_(u,m,i,p,n[d+6],17,-1473231341),p=_(p,u,m,i,n[d+7],22,-45705983),i=_(i,p,u,m,n[d+8],7,1770035416),m=_(m,i,p,u,n[d+9],12,-1958414417),u=_(u,m,i,p,n[d+10],17,-42063),p=_(p,u,m,i,n[d+11],22,-1990404162),i=_(i,p,u,m,n[d+12],7,1804603682),m=_(m,i,p,u,n[d+13],12,-40341101),u=_(u,m,i,p,n[d+14],17,-1502002290),i=w(i,p=_(p,u,m,i,n[d+15],22,1236535329),u,m,n[d+1],5,-165796510),m=w(m,i,p,u,n[d+6],9,-1069501632),u=w(u,m,i,p,n[d+11],14,643717713),p=w(p,u,m,i,n[d+0],20,-373897302),i=w(i,p,u,m,n[d+5],5,-701558691),m=w(m,i,p,u,n[d+10],9,38016083),u=w(u,m,i,p,n[d+15],14,-660478335),p=w(p,u,m,i,n[d+4],20,-405537848),i=w(i,p,u,m,n[d+9],5,568446438),m=w(m,i,p,u,n[d+14],9,-1019803690),u=w(u,m,i,p,n[d+3],14,-187363961),p=w(p,u,m,i,n[d+8],20,1163531501),i=w(i,p,u,m,n[d+13],5,-1444681467),m=w(m,i,p,u,n[d+2],9,-51403784),u=w(u,m,i,p,n[d+7],14,1735328473),i=f(i,p=w(p,u,m,i,n[d+12],20,-1926607734),u,m,n[d+5],4,-378558),m=f(m,i,p,u,n[d+8],11,-2022574463),u=f(u,m,i,p,n[d+11],16,1839030562),p=f(p,u,m,i,n[d+14],23,-35309556),i=f(i,p,u,m,n[d+1],4,-1530992060),m=f(m,i,p,u,n[d+4],11,1272893353),u=f(u,m,i,p,n[d+7],16,-155497632),p=f(p,u,m,i,n[d+10],23,-1094730640),i=f(i,p,u,m,n[d+13],4,681279174),m=f(m,i,p,u,n[d+0],11,-358537222),u=f(u,m,i,p,n[d+3],16,-722521979),p=f(p,u,m,i,n[d+6],23,76029189),i=f(i,p,u,m,n[d+9],4,-640364487),m=f(m,i,p,u,n[d+12],11,-421815835),u=f(u,m,i,p,n[d+15],16,530742520),i=h(i,p=f(p,u,m,i,n[d+2],23,-995338651),u,m,n[d+0],6,-198630844),m=h(m,i,p,u,n[d+7],10,1126891415),u=h(u,m,i,p,n[d+14],15,-1416354905),p=h(p,u,m,i,n[d+5],21,-57434055),i=h(i,p,u,m,n[d+12],6,1700485571),m=h(m,i,p,u,n[d+3],10,-1894986606),u=h(u,m,i,p,n[d+10],15,-1051523),p=h(p,u,m,i,n[d+1],21,-2054922799),i=h(i,p,u,m,n[d+8],6,1873313359),m=h(m,i,p,u,n[d+15],10,-30611744),u=h(u,m,i,p,n[d+6],15,-1560198380),p=h(p,u,m,i,n[d+13],21,1309151649),i=h(i,p,u,m,n[d+4],6,-145523070),m=h(m,i,p,u,n[d+11],10,-1120210379),u=h(u,m,i,p,n[d+2],15,718787259),p=h(p,u,m,i,n[d+9],21,-343485551),i=i+g>>>0,p=p+y>>>0,u=u+b>>>0,m=m+v>>>0}return a.endian([i,p,u,m])})._ff=function(e,t,n,a,r,o,s){var l=e+(t&n|~t&a)+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._gg=function(e,t,n,a,r,o,s){var l=e+(t&a|n&~a)+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._hh=function(e,t,n,a,r,o,s){var l=e+(t^n^a)+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._ii=function(e,t,n,a,r,o,s){var l=e+(n^(t|~a))+(r>>>0)+s;return(l<<o|l>>>32-o)+t},l._blocksize=16,l._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=a.wordsToBytes(l(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):a.bytesToHex(n)}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element;function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},t.apply(null,arguments)}var a=n(500),r=n.n(a),o=n(892),s=n.n(o);const l={contactId:null,contactsConversation:{},generalConsentAccepted:!1};function c(e,t){const n={};return new Set([...Object.keys(e),...Object.keys(t)]).forEach(a=>{Object.prototype.hasOwnProperty.call(e,a)&&Object.prototype.hasOwnProperty.call(t,a)?!function(e){const t=typeof e;return null!=e&&("object"==t||"function"==t)}(e[a])||Array.isArray(e[a])?n[a]=t[a]:n[a]=c(e[a],t[a]):Object.prototype.hasOwnProperty.call(e,a)?n[a]=e[a]:Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}),n}const i=(0,e.createContext)(),p=(e,t)=>{const{contacts:n,contactId:a,storeName:r}=t.payload;switch(t.type){case"PERSIST_STATE":const o=s()(JSON.stringify(t.payload.contacts));return console.log(`Persisting state for store: ${r} with hash: ${o}`),((e,t,n=30)=>{let a=localStorage.getItem(e);if(a)a=JSON.parse(a),a.value=t;else{const e=new Date;a={value:t,expiration:new Date(e.getTime()+24*n*60*60*1e3).getTime()}}localStorage.setItem(e,JSON.stringify(a))})(r,{...e,contactsHash:s()(JSON.stringify(t.payload.contacts))}),e;case"HYDRATE_STATE":{const t=(e=>{const t=localStorage.getItem(e);if(t){const n=JSON.parse(t);return(new Date).getTime()>n.expiration?(localStorage.removeItem(e),null):n.value}return null})(r),a=s()(JSON.stringify(n));return console.log(`Hydrating state for store: ${r} with hash: ${a}`),t?t.contactsHash!==a?{...l,contactsHash:a}:(n.find(e=>e.id===t.contactId)||(t.contactId=null),{...t}):{...e,contactsHash:a}}case"SET_CONTACT_ID":{if(null===a)return{...e,contactId:null};const t=n.find(e=>e.id===a),r=t?.message||"",o=e.contactsConversation[a];return""===r||r===(o?.messageListArray?.[0]?.text||"")&&o?{...e,contactId:a}:c(e,{contactId:a,contactsConversation:{[a]:{messageListArray:[{id:"",source:"user",text:r,status:""}],threadOpenaiId:""}}})}case"SET_GENERAL_CONSENT_ACCEPTED":{const{accepted:n}=t.payload;return{...e,generalConsentAccepted:n}}}return e},u=()=>(0,e.useContext)(i),m=t=>{const{contacts:n,children:a}=t,[r,o]=(0,e.useReducer)(p,l),s="persist:qlwapp";return(0,e.useEffect)(()=>{o({type:"HYDRATE_STATE",payload:{contacts:n,storeName:s}})},[]),(0,e.useEffect)(()=>{o({type:"PERSIST_STATE",payload:{contacts:n,storeName:s}})},[r]),(0,e.createElement)(i.Provider,{value:{...r,...t,setContactId:e=>{o({type:"SET_CONTACT_ID",payload:{contacts:n,contactId:e,storeName:s}})},setGeneralConsentAccepted:e=>{o({type:"SET_GENERAL_CONSENT_ACCEPTED",payload:{accepted:e}})}}},a)},d=window.wp.i18n,_=()=>(0,e.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},(0,e.createElement)("path",{d:"M20.563 22.104l-1.875 1.875-8-8 8-8 1.875 1.875-6.125 6.125z"})),w=({contact:t})=>{const{box:n}=u(),a=()=>{if(!t?.timefrom||!t?.timeto||!t?.timedays)return!0;const e=new Date,n=e.getDay().toString(),a=e.toTimeString().slice(0,5);return!!t.timedays.some(e=>e.value===n)&&!(a<t.timefrom||a>t.timeto)};return"with_status"===t?.visibility&&a(),a(),(0,e.createElement)("div",{className:"qlwapp__avatar"},(0,e.createElement)("div",{className:"qlwapp__avatar__container"},t?.avatar&&(0,e.createElement)("img",{src:t.avatar,alt:t.firstname,loading:"yes"===n.lazy_load&&"lazy"})))},f=({onClose:t,onPrevious:n})=>{const{contactId:a,box:r,contacts:o}=u(),s=o.find(e=>e.id===a);return(0,e.createElement)("div",{className:"qlwapp__header"},(0,e.createElement)("i",{className:"qlwapp__close",onClick:t},"×"),(0,e.createElement)("div",{className:"qlwapp__carousel"},(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},r.header&&(0,e.createElement)("div",{className:"qlwapp__header-description",dangerouslySetInnerHTML:{__html:r.header}})),(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},(0,e.createElement)("div",{className:"qlwapp__header-contact"},(0,e.createElement)("a",{className:"qlwapp__previous",onClick:n},(0,e.createElement)(_,null)),(0,e.createElement)("div",{className:"qlwapp__info"},(0,e.createElement)("span",{className:"qlwapp__name"},s?.firstname," ",s?.lastname),(0,e.createElement)("span",{className:"qlwapp__time"},s?.timefrom!==s?.timeto&&(0,d.sprintf)((0,d._x)("Available from %1$s to %2$s","wp-whatsapp-chat"),s?.timefrom,s?.timeto),s?.label&&` - ${s?.label}`)),(0,e.createElement)(w,{contact:s})))))},h=()=>(0,e.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},(0,e.createElement)("path",{d:"M2.776 31.54c-1.954 1.036-3.144 0.122-2.658-2.038l2.066-9.17c0.246-1.086 1.318-2.068 2.432-2.2l12.39-1.44c3.296-0.38 3.308-0.996 0-1.374l-12.39-1.416c-1.1-0.126-2.18-1.080-2.424-2.17l-2.080-9.264c-0.486-2.146 0.704-3.046 2.662-2.006l25.7 13.658c1.956 1.038 1.96 2.72 0 3.76l-25.7 13.66z"})),g=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),t=window.matchMedia("(pointer:coarse)");return t&&t.matches||e},y=({type:e,group:t,phone:n,message:a,whatsapp_link_type:r="web"})=>{const o=g()?"api":r,s="api"===o?"https://api.whatsapp.com/send":"https://web.whatsapp.com/send";if("group"===e){const e=(e=>{try{const t=new URL(e);if("chat.whatsapp.com"===t.hostname)return t.pathname.replace("/","");if("web.whatsapp.com"===t.hostname&&"/accept"===t.pathname)return t.searchParams.get("code")}catch(e){console.error("Invalid URL",e)}return null})(t);return"api"===o?`https://chat.whatsapp.com/${e}`:`https://web.whatsapp.com/accept?code=${e}`}return`${s}?phone=${function(e){return(e=e.replace(/[^0-9]/g,"")).replace(/^0+/,"")}(n?.toString())}&text=${encodeURIComponent(function(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}(a))}`};function b(e){const t=y(e),n=new CustomEvent("qlwapp.click",{bubbles:!0,cancelable:!0});window.dispatchEvent(n),window.open(t,"_blank","noreferrer")}const v=e=>{if(!e||"string"!=typeof e)return e;const t=document.createElement("textarea");return t.innerHTML=e,t.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\n/g,"<br>")},E=()=>{const{box:t,button:n,contactId:a,contacts:o,generalConsentAccepted:s}=u(),l=1===t?.consentEnabled,c=o.find(e=>e.id===a),[i,p]=(0,e.useState)(""),m=(0,e.useRef)(),_=!i.trim()||!s&&l,w=e=>{e.preventDefault(),b({...c,message:i,whatsapp_link_type:n.whatsapp_link_type})};return(0,e.createElement)(e.Fragment,null,t.footer&&(0,e.createElement)("div",{className:"qlwapp__footer",dangerouslySetInnerHTML:{__html:t.footer}}),(0,e.createElement)("div",{className:"qlwapp__response"},(0,e.createElement)("pre",{dangerouslySetInnerHTML:{__html:v(i)}}),(0,e.createElement)("textarea",{ref:m,maxLength:"300",onChange:e=>{e.preventDefault(),p(e.target.value),((e=!1)=>{const t=m.current;t&&(t.style.height="",e||""!==!i||(t.style.height=`${t.scrollHeight}px`))})()},onKeyDown:e=>{e.shiftKey&&"Enter"===e.key||"Enter"!==e.key||_||w(e)},value:i,placeholder:t?.response,"aria-label":t?.response,tabIndex:"0"}),(0,e.createElement)("div",{className:"qlwapp__response__buttons"},(0,e.createElement)("i",{className:"qlwapp__reply--disabled qlwf-emoji",role:"button",tabIndex:"0",title:(0,d.__)("Add emoji","wp-whatsapp-chat")}),(0,e.createElement)("a",{className:r()("qlwapp__reply",_&&"qlwapp__reply--disabled"),role:"button",tabIndex:"0",onClick:_?null:w,title:(0,d.__)("Send","wp-whatsapp-chat"),target:"blank"},(0,e.createElement)(h,null)))))};function N(e,t){return parseInt(e+t)}function q(e){let t=""+e.getMinutes();return 1===t.length&&(t="0"+t),e.getHours()+":"+t}const T=({timezone:e,timefrom:t,timeto:n,timedays:a})=>{const r=(({timedays:e})=>{const t=(new Date).getDay().toString();return e?.includes(t)||0===e?.length})({timedays:a}),o=function(e){let t=0;if(e.includes("UTC")){const n=e.replace(/UTC\+?/,"");isNaN(n)||(t=60*parseInt(n))}else try{const n=(new Date).toLocaleString("en-US",{timeZone:e});t=(new Date(n+" UTC")-new Date)/6e4}catch(e){return 0}return t}(e),s=new Date,l=new Date,c=new Date;let i=l.getTime(),p=s.getTime();if(t!==n){const e=-c.getTimezoneOffset()-(o||0);let a,u;a=N(t[0],t[1]),u=N(t[3],t[4]),l.setHours(a),l.setMinutes(u+e),i=l.getTime(),a=N(n[0],n[1]),u=N(n[3],n[4]),s.setHours(a),s.setMinutes(u+e),p=s.getTime(),i>p&&(i-=864e5);const m=i<=c.getTime()&&c.getTime()<=p;return{isAvailableNow:r&&m,isInAvailableDay:r,isInAvailableHour:m,timefrom:q(l),timeto:q(s)}}return{isAvailableNow:r,isInAvailableDay:r,isInAvailableHour:!0}};function S(e,t){return!!e.includes(parseInt(t))||!!e.includes(t.toString())}function x({timedays:e,timezone:t}){const n=function(e){try{let t=new Date;const n={weekday:"long"},a=function(e){const t=e.match(/^UTC([+-]\d{1,2})$/);return t?60*parseInt(t[1],10)*60*1e3:null}(e);if(null!==a){const e=new Date(t.getTime()+6e4*t.getTimezoneOffset()+a);n.timeZone="UTC",t=e}else n.timeZone=e;return{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6}[new Intl.DateTimeFormat("en-US",n).formatToParts(t).find(e=>"weekday"===e.type).value]}catch(e){return null}}(t);if(null===n)return!1;const a=[(0,d.__)("Sunday","wp-whatsapp-chat"),(0,d.__)("Monday","wp-whatsapp-chat"),(0,d.__)("Tuesday","wp-whatsapp-chat"),(0,d.__)("Wednesday","wp-whatsapp-chat"),(0,d.__)("Thursday","wp-whatsapp-chat"),(0,d.__)("Friday","wp-whatsapp-chat"),(0,d.__)("Saturday","wp-whatsapp-chat")];for(let t=n;t<=6;t++)if(S(e,t))return a[t];for(let t=0;t<n;t++)if(S(e,t))return a[t];return!1}const A=({contact:t,onClick:n})=>{const{isAvailableNow:a,isInAvailableDay:o,isInAvailableHour:s,timefrom:l,timeto:c}=T(t);if(!a&&"hidden"===t.visibility)return;const i=x(t);return(0,e.createElement)("a",{className:r()("qlwapp__contact",!a&&"readonly"===t.visibility&&"qlwapp__contact--disabled"),onClick:n,role:"button",tabIndex:"0",target:"_blank"},(0,e.createElement)(w,{contact:t}),(0,e.createElement)("div",{className:"qlwapp__info"},(0,e.createElement)("span",{className:"qlwapp__label"},t?.label),(0,e.createElement)("span",{className:"qlwapp__name"},t?.firstname," ",t?.lastname),"with_status"===t?.visibility&&(0,e.createElement)("div",{className:"qlwapp__status qlwapp__info"},(0,e.createElement)("div",{className:"qlwapp__status__indicator "+(a?"qlwapp__status__indicator--online":"qlwapp__status__indicator--offline")}),(0,e.createElement)("span",{className:"qlwapp__status__text"},a?"Online":"Offline")),o?!s&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,d.sprintf)((0,d._x)("Available from %1$s to %2$s","wp-whatsapp-chat"),l,c)):i&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,d.sprintf)((0,d._x)("Available on %s","wp-whatsapp-chat"),i))))},C=({onClick:t})=>{const[,n]=(()=>{const[t,n]=(0,e.useState)(!1);return[t,e=>{n(!0),setTimeout(()=>{e(),n(!1)},0)}]})(),{box:a,button:r,contacts:o,setContactId:s}=u(),l=e=>a=>{a.preventDefault(),e.chat?(t("qlwapp__modal--opening"),n(()=>{s(e.id)})):b({...e,whatsapp_link_type:r.whatsapp_link_type})},c=()=>{const e=document.querySelector(".qlwapp__header")?.offsetHeight,t=a.footer?document.querySelector(".qlwapp__footer")?.offsetHeight:document.querySelector(".qlwapp__response")?.offsetHeight;let n=window.innerHeight-e-t;g()&&(n=.7*window.innerHeight-e-t),document.documentElement.style.setProperty("--qlwapp-scheme-box-height",`${n}px`)};return(0,e.useEffect)(()=>(window.addEventListener("resize",c()),window.addEventListener("load",c()),()=>{window.removeEventListener("resize",c()),window.removeEventListener("load",c())}),[]),(0,e.createElement)("div",{className:"qlwapp__contact-list"},o.length?o.map(t=>(0,e.createElement)(A,{key:t.id,contact:t,onClick:l(t)})):(0,e.createElement)("div",{className:"qlwapp__contact-list__empty"},(0,d.__)("No contacts found.","wp-whatsapp-chat")))},I=()=>(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 9 24 6"},(0,e.createElement)("circle",{cx:18,cy:12,r:0,fill:"currentColor"},(0,e.createElement)("animate",{attributeName:"r",begin:.67,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"})),(0,e.createElement)("circle",{cx:12,cy:12,r:0,fill:"currentColor"},(0,e.createElement)("animate",{attributeName:"r",begin:.33,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"})),(0,e.createElement)("circle",{cx:6,cy:12,r:0,fill:"currentColor"},(0,e.createElement)("animate",{attributeName:"r",begin:0,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))),k=({text:t,status:n,source:a})=>(0,e.createElement)("div",{className:r()("qlwapp__message",a&&`qlwapp__message--${a}`,n&&`qlwapp__message--${n}`)},"waiting"===n?(0,e.createElement)("span",{className:"qlwapp__message--spinner"},(0,e.createElement)(I,null)):(0,e.createElement)("span",{dangerouslySetInnerHTML:{__html:v(t)}})),O=()=>{const n=(0,e.useRef)(null),{contactId:a,contactsConversation:r}=u(),{messageListArray:o}=r[a]||{messageListArray:[]};return(0,e.useEffect)(()=>{n.current&&o.length>0&&setTimeout(()=>{n.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[700])},[o]),(0,e.createElement)("div",{className:"qlwapp__message-list"},o.map(n=>(0,e.createElement)(k,t({key:n.id},n))),(0,e.createElement)("span",{ref:n}))},D=()=>{const{box:t,generalConsentAccepted:n,setGeneralConsentAccepted:a}=u(),[r,o]=(0,e.useState)(!0),[s,l]=(0,e.useState)(!1),c=1===t?.consentEnabled,i=t?.consentMessage||(0,d.__)("I accept cookies and privacy policy.","wp-whatsapp-chat");return c&&r?(0,e.createElement)("div",{className:"qlwapp__general-consent "+(s?"qlwapp__general-consent--accepted":"")},(0,e.createElement)("label",{className:"qlwapp__general-consent-label"},(0,e.createElement)("input",{id:"qlwapp_general_consent",type:"checkbox",checked:n,onChange:e=>{const t=e.target.checked;a(t),t&&(l(!0),setTimeout(()=>{o(!1)},1e3))},className:"qlwapp__general-consent-checkbox"}),(0,e.createElement)("span",{className:"qlwapp__general-consent-text",dangerouslySetInnerHTML:{__html:i}}))):null},M=(0,e.forwardRef)(({handleBoxClose:t},n)=>{const{contactId:a,setContactId:o}=u(),[s,l]=(0,e.useState)(""),c=null!==a;return(0,e.createElement)("div",{ref:n,className:r()("qlwapp__modal",c&&"qlwapp__modal--response",s)},(0,e.createElement)(f,{onClose:t,onPrevious:e=>{e.preventDefault(),l("qlwapp__modal--closing"),setTimeout(()=>{o(null),l("")},[300])}}),(0,e.createElement)("div",{className:"qlwapp__body"},(0,e.createElement)("div",{className:"qlwapp__carousel"},(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},(0,e.createElement)(C,{onClick:l})),(0,e.createElement)("div",{className:"qlwapp__carousel-slide"},null!==a&&(0,e.createElement)(O,null)))),(0,e.createElement)(D,null),(0,e.createElement)(E,null))}),H=(0,e.forwardRef)((n,a)=>(0,e.createElement)(M,t({},n,{ref:a}))),L=function({onClick:t}){const{button:n,box:a,isModalOpen:o}=u(),{isAvailableNow:s,isInAvailableDay:l,isInAvailableHour:c,timefrom:i,timeto:p}=T(n);if(!s&&"hidden"===n.visibility)return;const m=x(n);return(0,e.createElement)("a",{className:r()("qlwapp__button",`qlwapp__button--${n.layout}`,!s&&"qlwapp__button--disabled"),role:"button",tabIndex:"0",onClick:e=>(e=>{e.preventDefault(),"yes"===n.box?t(e):(e=>{e.preventDefault(),b(n)})(e)})(e)},((t,n="",a={},r="button")=>{let o="28px";"bubble"===r?o="48px":"image"===r&&(o="100%");const s={width:o,height:"image"===r?"auto":o,objectFit:"contain",flexShrink:0,className:`${n} qlwapp__custom-image`,...a};return(e=>!(!e||"string"!=typeof e)&&(e.startsWith("http")||e.startsWith("https")||/\.(jpg|jpeg|png|gif|svg|webp)$/i.test(e)||e.includes(".")))(t)?(0,e.createElement)("img",{src:t,alt:"Custom Icon",className:`${n} qlwapp__custom-image`,style:s}):(0,e.createElement)("i",{className:`${n} ${t}`,style:a})})(n.icon,"qlwapp__icon",{},n.layout),"bubble"===n.layout&&(0,e.createElement)("i",{className:"qlwapp__close"},"×"),n.text&&(0,e.createElement)("span",{className:"qlwapp__text"},n.text),"bubble"===n.notification_bubble&&s&&!o&&(0,e.createElement)("span",{className:r()("qlwapp__notification-bubble",n.notification_bubble_animation&&`qlwapp__notification-bubble--${n.notification_bubble_animation}`),"aria-label":(0,d.sprintf)((0,d._x)("New message notification","wp-whatsapp-chat"))},"1"),l?!c&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,d.sprintf)((0,d._x)("Available from %1$s to %2$s","wp-whatsapp-chat"),i,p)):m&&(0,e.createElement)("span",{className:"qlwapp__time"},(0,d.sprintf)((0,d._x)("Available on %s","wp-whatsapp-chat"),m)))},$=()=>window.innerWidth<=430&&g(),R=({children:t,containerRef:n,boxTransitionClass:a,isOpen:o})=>{const[s,l]=(0,e.useState)($()),{button:c,isMobilePreview:i}=u(),p="yes"===c.rounded;(0,e.useEffect)(()=>{const e=()=>{l($())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const m=s||i;return(0,e.createElement)("div",{ref:n,className:r()("qlwapp__container",`qlwapp__container--${c.position}`,p&&"qlwapp__container--rounded",m&&"qlwapp-is-mobile",a)},t)},P=e=>!("hide"===e||"desktop"===e&&g()||"mobile"===e&&!g()),j=(0,e.memo)(n=>{const{box:a,button:r,contacts:o}=n,s=(e=>e?(Array.isArray(e)||(e=Object.values(e)),e.filter(e=>P(e?.display?.devices)&&!("hidden"===e?.visibility)).sort((e,t)=>{const n=void 0!==e.order&&null!==e.order?e.order:Number.MAX_SAFE_INTEGER,a=void 0!==t.order&&null!==t.order?t.order:Number.MAX_SAFE_INTEGER;return n===a?0:n<a?-1:1})):[])(o),l=(0,e.useRef)(null),c=(0,e.useRef)(null),[i,p]=(0,e.useState)(!1),[u,d]=(0,e.useState)(""),_="qlwapp_box_closed",w="yes"===a.auto_open&&"yes"===r.box,f="true"===function(e){const t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}(_),h=Number(a.auto_delay_open);(0,e.useEffect)(()=>{w&&!f&&setTimeout(()=>{p(!0)},h)},[]),(0,e.useEffect)(()=>{const e=a.allow_outside_close||"no",t=t=>{i&&"yes"===e&&c.current&&!c.current.contains(t.target)&&g(t)};if(i&&"yes"===e)return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[i,a.allow_outside_close]);const g=e=>{e?.preventDefault(),d("qlwapp__container--closing"),function(e){let t="";{const e=new Date;e.setTime(e.getTime()+6048e5),t="; expires="+e.toUTCString()}document.cookie=e+"=true"+t+"; path=/"}(_),setTimeout(()=>{p(!1),d("")},300)};return(0,e.createElement)(m,t({},n,{contacts:s,isModalOpen:i}),(0,e.createElement)(R,{boxTransitionClass:u,containerRef:l,isOpen:i},i&&(0,e.createElement)(H,{ref:c,handleBoxClose:g}),(0,e.createElement)(L,{onClick:()=>{i?g():(p(!0),d("qlwapp__container--opening"),setTimeout(()=>{d("qlwapp__container--open")},300))}})))});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".qlwapp").forEach(t=>{var n,a,r,o;const s=null!==(n=JSON.parse(t.getAttribute("data-display")))&&void 0!==n?n:{},l=null!==(a=JSON.parse(t.getAttribute("data-button")))&&void 0!==a?a:{},c=null!==(r=JSON.parse(t.getAttribute("data-box")))&&void 0!==r?r:{},i=null!==(o=JSON.parse(t.getAttribute("data-contacts")))&&void 0!==o?o:{};P(s?.devices)&&(void 0!==e.createRoot?(0,e.createRoot)(t).render((0,e.createElement)(j,{display:s,button:l,box:c,contacts:i})):(0,e.render)((0,e.createElement)(j,{display:s,button:l,box:c,contacts:i}),t))}),document.addEventListener("click",e=>{const t=e.target.closest('[data-action="open"]');if(!t)return;e.preventDefault();const n=t.dataset.phone,a=t.dataset.message,r=t.dataset.whatsapp_link_type||"web";if(!n)return;const o=y({type:"phone",phone:n,message:a,whatsapp_link_type:r}),s=new CustomEvent("qlwapp.click",{bubbles:!0,cancelable:!0});window.dispatchEvent(s),window.open(o,"_blank","noreferrer")})})})()})();